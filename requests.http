### ============================================
### AUTHENTICATION
### ============================================

### STEP 1: Start OAuth Login (Open this URL in your browser)
### This will redirect you to Google for authentication
### After authentication, you'll be redirected back with a JWT token
GET http://localhost:3000/api/auth/google/login

### STEP 2: After Google authentication, you'll be redirected to:
### http://localhost:3000/api/auth/google/redirect
### The response will contain your access_token. Copy it!

### STEP 3: Use the token in subsequent requests (replace YOUR_TOKEN_HERE with the actual token)
### Example response from /google/redirect:
### {
###   "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
###   "user": { ... }
### }

### Get your profile (requires authentication)
GET http://localhost:3000/api/auth/profile
Authorization: Bearer YOUR_TOKEN_HERE

### ============================================
### USERS (All endpoints require authentication)
### ============================================

### GET all users
GET http://localhost:3000/api/users
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Inl1bGlhdmlrYWtydXBrYUBnbWFpbC5jb20iLCJzdWIiOjIsInJvbGUiOiJVU0VSIiwiaWF0IjoxNzY0NTM0Nzk1LCJleHAiOjE3NjUxMzk1OTV9.jYJgKVg8W0oAThKd8RNY6-iaywExpVXdAYkJR3nlhNI


### GET all admins
GET http://localhost:3000/api/users?role=USER
Authorization: Bearer YOUR_TOKEN_HERE

### GET user by id
GET http://localhost:3000/api/users/1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Inl1bGlhdmlrYWtydXBrYUBnbWFpbC5jb20iLCJzdWIiOjIsInJvbGUiOiJVU0VSIiwiaWF0IjoxNzY0NTM0Nzk1LCJleHAiOjE3NjUxMzk1OTV9.jYJgKVg8W0oAThKd8RNY6-iaywExpVXdAYkJR3nlhNI

### POST create user
POST http://localhost:3000/api/users
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "name": "Harry Potter",
  "email": "harrypotter4@gmail.com",
  "role": "ADMIN"
}

### update user
PATCH http://localhost:3000/api/users/1
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "email": "harrypotter3@gmail.com"
}

### DELETE user by id
DELETE http://localhost:3000/api/users/2
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Inl1bGlhdmlrYWtydXBrYUBnbWFpbC5jb20iLCJzdWIiOjIsInJvbGUiOiJVU0VSIiwiaWF0IjoxNzY0NTM0Nzk1LCJleHAiOjE3NjUxMzk1OTV9.jYJgKVg8W0oAThKd8RNY6-iaywExpVXdAYkJR3nlhNI






### GET genres
GET localhost:3000/api/genres
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Inl1bGlhdmlrYWtydXBrYUBnbWFpbC5jb20iLCJzdWIiOjIsInJvbGUiOiJVU0VSIiwiaWF0IjoxNzY0NTM0Nzk1LCJleHAiOjE3NjUxMzk1OTV9.jYJgKVg8W0oAThKd8RNY6-iaywExpVXdAYkJR3nlhNI



### GET genres by id
GET localhost:3000/genres/3

### DELETE genres by id
DELETE localhost:3000/genres/3

### POST create genre
POST localhost:3000/genres
Content-Type: application/json

{
  "name": "Comedy"
}

### Update genre by id
PATCH localhost:3000/genres/4
Content-Type: application/json

{
  "name": "Fantasy"
}


### AUTHORS

### GET all authors
GET localhost:3000/authors

### POST create author
POST localhost:3000/authors
Content-Type: application/json

{
  "name": "Stephen King"
}

### GET author by id
GET localhost:3000/authors/1

### PATCH author by id
PATCH localhost:3000/authors/1
Content-Type: application/json

{
  "name": "Artur Conan Doyle"
}

### DELETE author by id
DELETE localhost:3000/authors/1




###GET all books
GET localhost:3000/books





### POST create user book
POST http://localhost:3000/user-books
Content-Type: application/json

{
  "userId": 1,
  "bookId": 1,
  "rating": 5,
  "status": "completed"
}

### PATCH create user book
PATCH http://localhost:3000/user-books/1
Content-Type: application/json

{
  "completedAt": "2024-12-26T00:00:00Z"
}

###GET user book by id
GET localhost:3000/user-books/1


### GET all user book
GET localhost:3000/user-books

### DELETE
DELETE localhost:3000/user-books/2




### POST create reading goal
POST http://localhost:3000/reading-goals
Content-Type: application/json

{
  "userId": 1,
  "goalName": "Read 10 books in summer",
  "targetBooks": 10,
  "startDate": "2025-06-01",
  "endDate": "2025-09-01"
}

### GET reading goal by id
GET localhost:3000/reading-goals/1

### GET all reading goals
GET localhost:3000/reading-goals

### GET all reading goals per user
GET http://localhost:3000/reading-goals/user/1



### GET all notes
GET localhost:3000/notes

### POST create note
POST localhost:3000/notes
Content-Type: application/json

{
  "content": "I hate main character 2!!!",
  "userBookId": 1,
  "pageNumber": 10
}

### update note
PATCH localhost:3000/notes/1
Content-Type: application/json

{
  "content": "I hate main character!!!",
  "userBookId": 1,
  "pageNumber": 10
}

### GET note by user book
GET localhost:3000/notes/user-book/1

### GET note by id
GET localhost:3000/notes/2

### DELETE note by id
DELETE localhost:3000/notes/2



### USER-BOOKS - БАЗОВІ ОПЕРАЦІЇ
### ============================================

### POST - Створити запис книги для користувача
POST http://localhost:3000/user-books
Content-Type: application/json

{
  "userId": 1,
  "bookId": 1,
  "rating": 5,
  "status": "to-read"
}

### GET - Отримати всі записи user-books
GET http://localhost:3000/user-books

### GET - Отримати user-book за ID
GET http://localhost:3000/user-books/1

### PATCH - Оновити user-book (загальне оновлення)
PATCH http://localhost:3000/user-books/1
Content-Type: application/json

{
  "rating": 4,
  "completedAt": "2024-12-26T00:00:00Z"
}

### DELETE - Видалити user-book
DELETE http://localhost:3000/user-books/2

### ============================================
### ФІЛЬТРАЦІЯ ТА ПОШУК
### ============================================

### GET - Отримати всі книги користувача (без фільтрів)
GET http://localhost:3000/user-books/user/1

### GET - Фільтр по статусу (to-read)
GET http://localhost:3000/user-books/user/1?status=to-read

### GET - Фільтр по статусу (reading)
GET http://localhost:3000/user-books/user/1?status=reading

### GET - Фільтр по статусу (completed)
GET http://localhost:3000/user-books/user/1?status=completed

### GET - Фільтр по автору
GET http://localhost:3000/user-books/user/1?authorId=1

### GET - Фільтр по жанру
GET http://localhost:3000/user-books/user/1?genreId=1

### GET - Комбіновані фільтри (статус + автор)
GET http://localhost:3000/user-books/user/1?status=to-read&authorId=1

### GET - Комбіновані фільтри (статус + жанр + автор)
GET http://localhost:3000/user-books/user/1?status=to-read&authorId=1&genreId=1

### GET - Пошук книг по назві або автору
GET http://localhost:3000/user-books/user/1/search?q=bad

### GET - Пошук по назві автора
GET http://localhost:3000/user-books/user/1/search?q=stephen



### ============================================
### ТЕСТОВІ СЦЕНАРІЇ
### ============================================

### СЦЕНАРІЙ 1: Додати нову книгу і почати читати
# 1. Додати книгу зі статусом "to-read"
POST http://localhost:3000/user-books
Content-Type: application/json

{
  "userId": 1,
  "bookId": 2,
  "status": "to-read"
}

### 2. Оновити прогрес (автоматично змінить статус на "reading")
PATCH http://localhost:3000/user-books/1/progress
Content-Type: application/json

{
"currentPage": 25
}

### 3. Перевірити результат
GET http://localhost:3000/user-books/1


### СЦЕНАРІЙ 2: Дочитати книгу
PATCH http://localhost:3000/user-books/1/progress
Content-Type: application/json

{
  "currentPage": 150
}

### 2. Дочитати книгу (припустимо, 300 сторінок)
PATCH http://localhost:3000/user-books/1/progress
Content-Type: application/json

{
"currentPage": 300
}

### 3. Додати рейтинг
PATCH http://localhost:3000/user-books/1
Content-Type: application/json

{
"rating": 5
}


### СЦЕНАРІЙ 3: Отримати книги зі статусом "reading"
GET http://localhost:3000/user-books/user/1?status=reading


### СЦЕНАРІЙ 4: Перевірити статистику
GET http://localhost:3000/user-books/user/1/stats



### ============================================
### ВАЛІДАЦІЯ ПОМИЛОК
### ============================================

### TEST - Невірний статус (повинен повернути помилку)
PATCH http://localhost:3000/user-books/1/status
Content-Type: application/json

{
  "status": "invalid-status"
}

### TEST - Від'ємна сторінка (повинен повернути помилку)
PATCH http://localhost:3000/user-books/1/progress
Content-Type: application/json

{
  "currentPage": -10
}

### TEST - Рейтинг поза діапазоном (повинен повернути помилку)
PATCH http://localhost:3000/user-books/1
Content-Type: application/json

{
  "rating": 10
}

### TEST - Неіснуючий користувач або книга
POST http://localhost:3000/user-books
Content-Type: application/json

{
  "userId": 9999,
  "bookId": 9999,
  "status": "to-read"
}

### TEST - Дублікат запису (користувач вже додав цю книгу)
POST http://localhost:3000/user-books
Content-Type: application/json

{
  "userId": 1,
  "bookId": 1,
  "status": "to-read"
}